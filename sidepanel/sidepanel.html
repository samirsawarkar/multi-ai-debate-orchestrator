<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Orchestrator - Side Panel</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="sidepanel-container">
    <header>
      <h1>AI Orchestrator</h1>
      <p class="subtitle">Full Control Mode</p>
    </header>

    <!-- AI Configuration -->
    <section class="section">
      <h2>AI Configuration</h2>
      <div class="ai-config-list" id="ai-config-list">
        <!-- Dynamically populated -->
      </div>
    </section>

    <!-- Template Selection -->
    <section class="section">
      <h2>Flow Template</h2>
      <select id="template-select-side">
        <option value="brainstorm">üß† Brainstorm</option>
        <option value="debate">‚öîÔ∏è Debate</option>
        <option value="validation">üîç Validation</option>
        <option value="redteam">üîí Red Team</option>
      </select>
      <div class="template-preview" id="template-preview">
        <!-- Preview will be shown here -->
      </div>
    </section>

    <!-- Role Editor -->
    <section class="section collapsible">
      <h2 class="collapsible-header">
        <span>Role Editor</span>
        <button class="collapse-btn" data-target="role-editor-content">‚ñº</button>
      </h2>
      <div class="collapsible-content" id="role-editor-content">
        <div id="role-editors">
          <!-- Dynamically populated based on selected AIs -->
        </div>
      </div>
    </section>

    <!-- Flow Controls -->
    <section class="section">
      <h2>Flow Controls</h2>
      <div class="flow-settings">
        <label>
          <span>Max Rounds:</span>
          <input type="number" id="max-rounds" min="1" max="3" value="1">
        </label>
        <label>
          <span>Auto-advance:</span>
          <input type="checkbox" id="auto-advance">
        </label>
      </div>
      <div class="user-input-section">
        <label for="user-topic-side">Topic / Problem:</label>
        <textarea id="user-topic-side" placeholder="Enter your topic or problem..." rows="3"></textarea>
      </div>
      <div class="action-buttons">
        <button id="start-flow-side" class="btn-primary">Start Flow</button>
        <button id="pause-flow-side" class="btn-secondary" disabled>Pause</button>
        <button id="next-turn-side" class="btn-secondary" disabled>Next Turn</button>
        <button id="reset-flow-side" class="btn-secondary">Reset</button>
      </div>
    </section>

    <!-- Status Indicator -->
    <section class="section" id="status-section-side">
      <h2>Status</h2>
      <div class="status-display">
        <div class="status-row">
          <span class="status-label">Flow:</span>
          <span id="flow-status">Idle</span>
        </div>
        <div class="status-row">
          <span class="status-label">Turn:</span>
          <span id="turn-status">-</span>
        </div>
        <div class="status-row">
          <span class="status-label">Current AI:</span>
          <span id="current-ai-status">-</span>
        </div>
      </div>
    </section>

    <!-- Context History -->
    <section class="section collapsible">
      <h2 class="collapsible-header">
        <span>Context History</span>
        <button class="collapse-btn" data-target="context-history-content">‚ñº</button>
      </h2>
      <div class="collapsible-content expanded" id="context-history-content">
        <div class="context-actions">
          <button id="clear-history-btn" class="btn-link">Clear History</button>
          <button id="export-history-btn" class="btn-link">Export</button>
        </div>
        <div id="context-history" class="context-list">
          <p class="empty-state">No conversation history yet</p>
        </div>
      </div>
    </section>
  </div>

  <script src="sidepanel.js"></script>
</body>
</html>
